{"version":3,"file":"js/238.d7a40471.js","mappings":"+LAGA,MAAMA,EAAOC,0CAEPC,EAAUC,IAAAA,OAAa,CACzBC,QAASJ,EAETK,QAAS,MAKbH,EAAQI,aAAaC,QAAQC,KACzBC,IACI,MAAMC,EAAQC,aAAaC,QAAQ,SAEnC,OADCF,EAA+CD,EAAOI,QAAQC,cAAgB,UAAUJ,SAAzED,EAAOI,QAAQC,cACxBL,KAEXM,GACWC,QAAQC,OAAOF,KAI9B,QCZO,SAASG,EAAMC,GAClB,OAAOZ,EAAQ,CACXa,IAAM,cACNC,OAAQ,OACRF,SAYD,SAASG,EAAYH,GACxB,OAAOZ,EAAQ,CACXa,IAAM,qBACNC,OAAQ,OACRF,W,mGC9BAI,EAAAA,EAAAA,GAAW,UAAP,MAAE,G,WAGkC,O,WACZ,M,WACC,S,0EANjCC,EAAAA,EAAAA,IAOM,YANFC,GAME,SALFF,EAAAA,EAAAA,GAAuF,SAAhFG,KAAK,OAAOC,YAAY,Q,qCAAiBC,EAAAA,KAAKC,MAAKC,GAAGC,QAAK,8BAAQH,EAAAA,aAAAA,EAAAA,eAAAA,IAAW,aAArF,iBAAgDA,EAAAA,KAAKC,UAKnD,SAJFN,EAAAA,EAAAA,GAAgG,SAAzFG,KAAK,W,qCAAoBE,EAAAA,KAAKI,SAAQF,GAAEH,YAAY,UAAWI,QAAK,8BAAQH,EAAAA,aAAAA,EAAAA,eAAAA,IAAW,aAA9F,iBAAgCA,EAAAA,KAAKI,aACrCT,EAAAA,EAAAA,GAAwC,UAA/BU,QAAK,oBAAEL,EAAAA,aAAAA,EAAAA,eAAAA,KAAa,MAG3B,GAFFM,EAAAA,EAAAA,IAA4CC,EAAA,CAA/BC,GAAG,aAAW,C,kBAAC,IAAE,M,OAC1BF,EAAAA,EAAAA,IAA4CC,EAAA,CAA/BC,GAAG,UAAQ,C,kBAAC,IAAK,M,gCAQ1C,GACIC,KAAM,QACNC,SACIC,EAAAA,EAAAA,KAAU,KACN5B,aAAa6B,WAAW,YAG5B,MAAMC,GAAOC,EAAAA,EAAAA,IAAS,CAClBb,MAAO,GACPG,SAAU,KAEdW,eAAeC,IACX,MAAMC,QAAY3B,EAAAA,EAAAA,IAAMuB,GACxBK,QAAQC,IAAIF,GACZ,MAAMnC,EAAQmC,EAAI1B,KAAK6B,KACJ,MAAfH,EAAII,QACJC,MAAM,QACNvC,aAAawC,QAAQ,QAAQzC,IAG7BwC,MAAMxC,GAGV,MAAO,CACHkC,cACAH,U,QCnChB,MAAMW,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://frontend/./src/api/request.js","webpack://frontend/./src/api/index.js","webpack://frontend/./src/views/Login.vue","webpack://frontend/./src/views/Login.vue?240b"],"sourcesContent":["import axios from \"axios\";\r\n\r\n// 創建axios實例\r\nconst api =  process.env.VUE_APP_BASE_API;\r\n/* var credentials = api===\"http://localhost:9090\"? false:true; */\r\nconst service = axios.create({\r\n    baseURL: api /* api 域名 */,\r\n    /* headers: { 'Content-Type': 'application/json' }, */\r\n    timeout: 8000 /* api響應時間 */,\r\n    /* withCredentials : credentials */\r\n});\r\n\r\n// 請求攔截器\r\nservice.interceptors.request.use(\r\n    config => {\r\n        const token = localStorage.getItem(\"token\");\r\n        !token ? delete config.headers.Authorization : (config.headers.Authorization = 'Bearer '+token);\r\n        return config;\r\n    },\r\n    error => {\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport default service;","import request from \"@/api/request\";\r\n\r\n// 註冊\r\nexport function register(data) {\r\n    return request({\r\n        url: `/user/register`,\r\n        method: \"post\",\r\n        data,\r\n    });\r\n}\r\n\r\n// 登入\r\nexport function login(data) {\r\n    return request({\r\n        url: `/user/login`,\r\n        method: \"post\",\r\n        data,\r\n    });\r\n}\r\n\r\n// 登出\r\nexport function logout() {\r\n    return request({\r\n        url: `/user/logout`,\r\n        method: \"post\",\r\n    });\r\n}\r\n// 管理員測試\r\nexport function findByEmail(data) {\r\n    return request({\r\n        url: `/admin/findByEmail`,\r\n        method: \"post\",\r\n        data,\r\n    });\r\n}","<template>\r\n    <div>\r\n        <h1>登入</h1>\r\n        <input type=\"text\" placeholder=\"請輸入信箱\" v-model=\"user.email\" @keyup.enter=\"submitLogin\">\r\n        <input type=\"password\" v-model=\"user.password\" placeholder=\"請輸入8位密碼\" @keyup.enter=\"submitLogin\">\r\n        <button @click=\"submitLogin\">登入</button>&nbsp;&nbsp;\r\n        <router-link to=\"/register\">註冊</router-link>\r\n            <router-link to=\"/admin\">管理員後台</router-link>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, inject, onMounted, reactive, ref } from \"@vue/runtime-core\";\r\nimport { login } from \"@/api/index.js\";\r\n\r\nexport default {\r\n    name: \"Login\",\r\n    setup() {\r\n        onMounted(() => {\r\n            localStorage.removeItem(\"token\");\r\n        });\r\n        /* const  state  = inject(\"global\"); */\r\n        const user = reactive({\r\n            email: \"\",\r\n            password: \"\",\r\n        });\r\n        async function submitLogin() {\r\n            const res = await login(user);\r\n            console.log(res)\r\n            const token = res.data.body\r\n            if (res.status === 200) {\r\n                alert(\"登入成功\")\r\n                localStorage.setItem(\"token\",token)\r\n                /* state.token = res.data.body */\r\n            }else{\r\n                alert(token)\r\n            }\r\n        }\r\n            return {\r\n                submitLogin,\r\n                user\r\n            };\r\n    }\r\n}\r\n</script>\r\n\r\n\r\n\r\n","import { render } from \"./Login.vue?vue&type=template&id=1472dcac\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["api","process","service","axios","baseURL","timeout","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","login","data","url","method","findByEmail","_createElementVNode","_createElementBlock","_hoisted_1","type","placeholder","$setup","email","$event","onKeyup","password","onClick","_createVNode","_component_router_link","to","name","setup","onMounted","removeItem","user","reactive","async","submitLogin","res","console","log","body","status","alert","setItem","__exports__","render"],"sourceRoot":""}